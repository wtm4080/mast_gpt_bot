version: "3.9"

services:
  mastodon-gpt-bot:
    build: .
    container_name: mastodon-gpt-bot
    restart: unless-stopped

    # .env から共通の環境変数を読み込む
    env_file:
      - .env

    # 必要ならデフォルト値をここで上書きもできる
    environment:
      # 公開範囲: .env になければ unlisted をデフォルトに
      MASTODON_POST_VISIBILITY: ${MASTODON_POST_VISIBILITY:-unlisted}
      # 自由トゥート間隔: デフォルト1時間
      FREE_TOOT_INTERVAL_SECS: ${FREE_TOOT_INTERVAL_SECS:-3600}

    # 外から叩かれるAPIじゃないのでポート公開は不要
    # ports:
    #   - "8080:8080"

    # ネットワークはデフォルト bridge で十分
    # networks:
    #   - default

# networks:
#   default:
#     driver: bridge
